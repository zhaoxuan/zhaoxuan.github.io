<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Entities should not be multiplied unnecessarily | The Simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="John" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="http://zhaoxuan.github.io/css/style.css" type="text/css" />
    <link rel="stylesheet" href="http://zhaoxuan.github.io/css/syntax.css" type="text/css" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <link rel="shortcut icon" href="http://zhaoxuan.github.io/favicon.ico" type="image/x-icon" />
    <!--[if lt IE 9]>
    <script src="http://zhaoxuan.github.io/js/html5.js" type="text/javascript"></script>
    <![endif]-->

    <!-- mathjax js is been used for mathematical formula -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>
<body id="default">
<div id="head-line"></div>
<div id="content">
    <header id="head">
        <div id="logo">
            <!-- <img src="http://mmistakes.github.io/minimal-mistakes/images/bio-photo.jpg" class="bio-photo" alt=" bio photo"> -->
            <img src="http://zhaoxuan.github.io/images/head_portrait.png" class="bio-photo" alt=" bio photo">
            <h2>Simple</h2>
        </div>
        <nav id="nav">
            <ul>
                <li class="fn-clear"><a href="http://zhaoxuan.github.io" rel="nofollow" class="action"><i class="icon-home"></i> Home</a></li>
                <li class="fn-clear"><a href="http://zhaoxuan.github.io/archives.html"><i class="icon-list-ul"></i> Archives</a></li>
                <li class="fn-clear"><a href="http://zhaoxuan.github.io/contact.html"><i class="icon-envelope-alt"></i> Contact</a></li>
                <li class="fn-clear"><a href="http://twitter.com/363602094"><i class="icon-twitter"></i> Twitter</a></li>
            </ul>
        </nav>
    </header>
    <section id="contain">
        <header id="begin">
            <!-- <span>Entities should not be multiplied unnecessarily</span> -->
            <h1 class="post-title">Entities should not be multiplied unnecessarily</h1>
        </header>
		
	<article class="post fn-clear">
        <h2 class="post-title"><a href="http://zhaoxuan.github.io/ruby/2012/10/31/ruby-mechanize.html" title="使用 mechanize 模拟浏览器提交数据" rel="bookmark">使用 mechanize 模拟浏览器提交数据</a></h2>
        <p class="time"><time pubdate="2012-10-31 22:06:00 +0800">31 Oct 2012</time></p>
        
        <p>对于要抓取网页的操作，nokogiri 绝对是一个非常牛逼的 gem。</p>

<p>但是如果这个页面涉及到登陆，涉及到跳转的时候 nokogiri 就有点无能为力了。</p>

<p>这里推荐使用 mechanize，类似的还有 faraday。</p>

<p>如果要涉及到 cookie 操作的话，推荐使用 mechanize，这样跳转起来方便。</p>

<p>如果要是抓 API 的话，就用 faraday。</p>

<p>1 install mechanize</p>

<div class="highlight"><pre><code class="ruby"><span class="n">gem</span> <span class="n">install</span> <span class="n">mechanize</span>
</code></pre></div>

<p>2 mechanize object</p>

<div class="highlight"><pre><code class="ruby"><span class="n">agent</span> <span class="o">=</span> <span class="ss">WWW</span><span class="p">:</span><span class="ss">:Mechanize</span><span class="o">.</span><span class="n">new</span>
</code></pre></div>

<p>3 vitual user_agent</p>

<div class="highlight"><pre><code class="ruby"><span class="n">agent</span><span class="o">.</span><span class="n">user_agent_alias</span> <span class="o">=</span> <span class="s1">&#39;Windows IE 7&#39;</span>
</code></pre></div>

<p><code>ruby user_agent https://github.com/sparklemotion/mechanize/blob/master/lib/mechanize.rb#L115 detail
AGENT_ALIASES = {
    'Mechanize' =&gt; "Mechanize/#{VERSION} Ruby/#{ruby_version} (http://github.com/sparklemotion/mechanize/)",
    'Linux Firefox' =&gt; 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.9.2.1) Gecko/20100122 firefox/3.6.1',
    'Linux Konqueror' =&gt; 'Mozilla/5.0 (compatible; Konqueror/3; Linux)',
    'Linux Mozilla' =&gt; 'Mozilla/5.0 (X11; U; Linux i686; en-US; rv:1.4) Gecko/20030624',
    'Mac Firefox' =&gt; 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10.6; en-US; rv:1.9.2) Gecko/20100115 Firefox/3.6',
    'Mac Mozilla' =&gt; 'Mozilla/5.0 (Macintosh; U; PPC Mac OS X Mach-O; en-US; rv:1.4a) Gecko/20030401',
    'Mac Safari 4' =&gt; 'Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_2; de-at) AppleWebKit/531.21.8 (KHTML, like Gecko) Version/4.0.4 Safari/531.21.10',
    'Mac Safari' =&gt; 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_2) AppleWebKit/534.51.22 (KHTML, like Gecko) Version/5.1.1 Safari/534.51.22',
    'Windows IE 6' =&gt; 'Mozilla/4.0 (compatible; MSIE 6.0; Windows NT 5.1)',
    'Windows IE 7' =&gt; 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.1.4322; .NET CLR 2.0.50727)',
    'Windows IE 8' =&gt; 'Mozilla/5.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 1.1.4322; .NET CLR 2.0.50727)',
    'Windows IE 9' =&gt; 'Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)',
    'Windows Mozilla' =&gt; 'Mozilla/5.0 (Windows; U; Windows NT 5.0; en-US; rv:1.4b) Gecko/20030516 Mozilla Firebird/0.6',
    'iPhone' =&gt; 'Mozilla/5.0 (iPhone; U; CPU like Mac OS X; en) AppleWebKit/420+ (KHTML, like Gecko) Version/3.0 Mobile/1C28 Safari/419.3',
  }
</code></p>

<p>4 get page
<code>ruby get_page
agent.get('https://my.comscore.com/login/') 
</code></p>

<p>5 set time out
<code>ruby set_time_out 
agent.open_timeout = 10 
</code></p>

<p>6 read form tag
<code>ruby read_form_tag
page.form('loginform')
</code></p>

<p>7 fill in form
<code>ruby fill
login_form.userid = 'username'
login_form.passwd = 'password'
</code></p>

<p>8 submit form
<code>ruby submit
agent.submit(login_form)
</code></p>

<p>这样就能完成对 comscore 这个网站的登陆了，非常简单好用。</p>


        
    </article>

	<article class="post fn-clear">
        <h2 class="post-title"><a href="http://zhaoxuan.github.io/fluentd/log/ruby/2012/10/29/fluentd-configuration-file.html" title="Fluentd 配置文件" rel="bookmark">Fluentd 配置文件</a></h2>
        <p class="time"><time pubdate="2012-10-29 07:56:00 +0800">29 Oct 2012</time></p>
        
        <p><a href="http://docs.fluentd.org/articles/config-file" target="_blank">Fluentd config file</a>
Overview
The configuration file allows the user to control the input and output behavior of Fluentd by (1) selecting input and output plugins and (2) specifying the plugin parameters. The file is required for Fluentd to operate properly.</p>

<h4 id="list-of-directives">List of Directives</h4>

<p>The configuration file consists of the following directives:
&gt; 1.source directives determine the input sources.
&gt;
&gt; 2.match directives determine the output destinations.
&gt;
&gt; 3.include directives include other files.</p>

<h4 id="source-directive">Source Directive</h4>
<p>Fluentd’s input sources are enabled by selecting and configuring the desired input plugins using source directives. Fluentd’s standard input plugins include http and forward.</p>

<div class="highlight"><pre><code class="bash">&lt;<span class="nb">source</span>&gt;
  <span class="nb">type </span>http
  port 8888
&lt;/source&gt;
</code></pre></div>

<h4 id="match-directive">Match Directive</h4>
<p>Fluentd’s output destinations are enabled by selecting and configuring the desired output plugins using match directives. Fluentd’s standard output plugins include file and forward.</p>

<div class="highlight"><pre><code class="bash">&lt;match debug.**&gt;
  <span class="nb">type </span>stdout
&lt;/match&gt;
</code></pre></div>

<p>Each match directive must include a match pattern and a type parameter. Match patterns are used to filter the events. Only events with tag matching the pattern will be sent to the output destination. The type parameter specifies the output plugin to use.</p>

<h4 id="match-pattern-how-you-control-the-event-flow-inside-fluentd">Match Pattern: how you control the event flow inside fluentd</h4>

<p>The following match patterns can be used for the <match> tag.</match></p>

<pre><code>* matches a single tag part.
For example, the pattern a.* matches a.b, but does not match a or a.b.c

** matches zero or more tag parts.
For example, the pattern a.** matches a, a.b and a.b.c

{X,Y,Z} matches X, Y, or Z, where X, Y, and Z are match patterns.
For example, the pattern {a,b} matches a and b, but does not match c
This can be used in combination with the * or ** patterns. Examples include a.{b,c}.* and a.{b,c.**}
</code></pre>


        
    </article>

	<article class="post fn-clear">
        <h2 class="post-title"><a href="http://zhaoxuan.github.io/fluentd/ruby/log/2012/10/28/fluentd-a-log-collection.html" title="使用 Fluentd 构建一个实时日志收集系统" rel="bookmark">使用 Fluentd 构建一个实时日志收集系统</a></h2>
        <p class="time"><time pubdate="2012-10-28 07:29:00 +0800">28 Oct 2012</time></p>
        
        <p>Fluentd 是一个日志收集系统，它的特点在于其各部分均是可定制化的，你可以通过简单的配置，将日志收集到不同的地方。</p>

<h4 id="section">安装</h4>
<p>Fluentd 目前已经提供了多个版本的安装包，包括 Debian 系列的 apt 安装包，Red Hat 系列的 yum 安装包，也包括 Ruby 的 gem 安装包。</p>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>gem install fluentd --no-ri --no-rdoc
</code></pre></div>

<h4 id="section-1">运行</h4>

<div class="highlight"><pre><code class="bash"><span class="nv">$ </span>fluentd --setup ./fluent
<span class="nv">$ </span>fluentd -c ./fluent/fluent.conf -vv &amp;
<span class="nv">$ </span><span class="nb">echo</span> <span class="s1">&#39;{&quot;json&quot;:&quot;message&quot;}&#39;</span> | fluent-cat debug.test
</code></pre></div>

        
    </article>

	<article class="post fn-clear">
        <h2 class="post-title"><a href="http://zhaoxuan.github.io/feeling/2012/10/23/lack-of-something.html" title="总是感觉缺少点什么" rel="bookmark">总是感觉缺少点什么</a></h2>
        <p class="time"><time pubdate="2012-10-23 23:05:00 +0800">23 Oct 2012</time></p>
        
        <p>今天是第二天到新公司上班了，但是突然有种异样的感觉。</p>

<p>第一是感觉环境好陌生啊，一切都是这么不了解，一切都是这么新，有种让人难以呼吸的感觉。</p>

<p>第二是好长时间都没有工作了，感觉不会工作了，不知道从什么地方开始？</p>

<p>第三是有点害怕，新的环境让我感觉好孤独。</p>

<p>因为好多人都不认识，突然见感觉不知道找谁说话了。</p>

<p>原来可以依靠的，帮助自己的人也不在身边，有问题都不知道向谁请教了。</p>

<p>感觉自己就是插入这个环境里面的外来生物，不知道如何生存。</p>

<p>虽然说到一个新环境都会有这样的不自在的感觉，但是有种莫名奇妙的害怕。</p>

<p>这个害怕来自未来的，来自不确定。</p>

<p>害怕自己不能被这个环境接受。</p>

<p>害怕自己没有人帮助。</p>

<p>害怕一切。</p>

<p>希望这个过程可以快一点。</p>

        
    </article>

	<article class="post fn-clear">
        <h2 class="post-title"><a href="http://zhaoxuan.github.io/feeling/2012/10/13/to-face-leaving.html" title="面对离开" rel="bookmark">面对离开</a></h2>
        <p class="time"><time pubdate="2012-10-13 01:57:00 +0800">13 Oct 2012</time></p>
        
        <h4 id="section">你是成功的走还是失败的走？</h4>

<p>面对离开，不同的人是有不同的原因的，但是小明告诉我，大概只有两种。</p>

<p>面对失败的结果，自己不能改变什么，被迫的离开。</p>

<p>这个失败的结果并不是工作上面的失败或者任务的失败，很可能是不敢面对失败的自己。</p>

<p>看见镜子中一个失败的人，自己非常害怕面对。</p>

<p>即使同事和领导可以原谅你，但是自己都放不下自己。</p>

<p>还有一个成功的离开。</p>

<p>在一个公司出色的完成任务，感觉自己的能力还没有发挥到最大，但是公司不能给自己一个舞台，出去迎接更多挑战。</p>

<p>这样的人是完美的，这个是我追求的目标，是一个标志成功的人物。</p>

<p>但是我这次到底是什么样的离开方式呢？</p>

<h3 id="section-1">你犹豫的时候让你更加犹豫，你决定的时候让你更加坚定。</h3>

<p>当你和一个人讨论他的选择时，请给他最大的帮助：他犹豫时，让他更加犹豫。他决定时，让他更加坚定。</p>

<p>什么意思呢？</p>

<p>如果一个人告诉你，他想走的时候，你应该让他更加犹豫，多想想前后左右，把事情考虑的更加周到。但是不应该给他任何选择性的意见。</p>

<p>如果一个人告诉你，他决定要走的时候，你反而应该鼓励他，给他最大的帮助，让他的选择更加坚定，走的时候不要有一点犹豫。</p>

<p>感谢小明对我说的这句话。</p>

<h3 id="section-2">想，立即，持续。</h3>

<p>这句话我听过不止一遍了，但是我还是没有立即行动。</p>

<p>面对别人问我有没有将来的想法的时候，我说有，三年后我想去创业。</p>

<p>看是非常好的目标，但是好像一点都不靠谱，因为你说三年，你现在在干什么？</p>

<p>为什么要等到三年后在去做呢？</p>

<p>三年后有三年后的事情，你现在可以做你现在的事情，没有什么事情是需要等待的。</p>

<h3 id="section-3">选择的成功并不是在你做选择的时刻，而是将来你的表现，做好了，就成功。</h3>

<p>人的一生都有非常多的选择，有对有错，但是没有什么选择是可以在你做选择的时候判断对与错。</p>

<p>选择本身并没有对错，好坏。</p>

<p>但是选择的结果，却能说明当时选择的对与错。</p>

<p>如果结果你非常满意，那么没有任何人可以说你的选择是错误的。</p>

<p>结果如果不好，只能说明你的工作没有做好，并不是当时选择不对。</p>

<p>所以我认为，选择的时候，没人知道对与错。</p>

<p>你的工作结果才能说明一切。</p>

<p>所以，想好了青年，想好了就不顾一切的往前冲吧青年，未来永远都是属于你的。</p>

<h3 id="section-4">提高你的情商，当别人在无意间否定你的工作时，马上提出你的想法，不要憋着给自己受气，最后受不了压力而崩溃。</h3>

<p>每一个人都不是完美的人，他所做的说的，都不能是完全正确的。</p>

<p>如果你不满意对方说的，不管对方是什么人，你都应该马上提出你的要求。</p>

<p>这也是一个人的情商，一个情商高的人可以最正确的争取。</p>

<p>而不是一味的听从，一味的听从命令是士兵的唯一真理。</p>

<p>但是我们是要把事情做对做好，而不是一味的服从。</p>

<blockquote>
  <blockquote>
    <p>先说这么多，好多事没有想清楚呢。</p>
  </blockquote>
</blockquote>

        
    </article>


    <nav id="pagination" class="fn-clear">
        <ul class="pagination">
            
                
                    <li><a href="http://zhaoxuan.github.io/">1</a></li>
                
            
                
                    <li><a href="http://zhaoxuan.github.io/page2/">2</a></li>
                
            
                
                    <li><a href="http://zhaoxuan.github.io/page3/">3</a></li>
                
            
                
                    <li class="current"><a href="javascript:void(0);">4</a></li>
                
            
                
                    <li><a href="http://zhaoxuan.github.io/page5/">5</a></li>
                
            
                
                    <li><a href="http://zhaoxuan.github.io/page6/">6</a></li>
                
            
                
                    <li><a href="http://zhaoxuan.github.io/page7/">7</a></li>
                
            
                
                    <li><a href="http://zhaoxuan.github.io/page8/">8</a></li>
                
            
        </ul>
    </nav>


        <footer id="foot">
            <p>&copy; 2014 John Zhao All rights reserved. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">PIZn</a></p>
        </footer>
    </section>
</div>
<div id="foot-line"></div>
<script src="http://zhaoxuan.github.io/js/jquery.js" type="text/javascript"></script>
<script src="http://zhaoxuan.github.io/js/jquery.scrollTo.js" type="text/javascript"></script>
<script src="http://zhaoxuan.github.io/js/theOne.js" type="text/javascript"></script>

</body>
</html>
