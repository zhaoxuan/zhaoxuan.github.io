<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Hadoop Combine | The Simple</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Jekyll" />
    <meta name="author" content="John" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="http://www.johninux.com/css/style.css" type="text/css" />
    <link rel="stylesheet" href="http://www.johninux.com/css/syntax.css" type="text/css" />
    <link rel="alternate" type="application/atom+xml" title="Recent Entries" href="/atom.xml" />
    <link rel="shortcut icon" href="http://www.johninux.com/favicon.ico" type="image/x-icon" />
    <!--[if lt IE 9]>
    <script src="http://www.johninux.com/js/html5.js" type="text/javascript"></script>
    <![endif]-->

    <!-- mathjax js is been used for mathematical formula -->
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
</head>
<body id="default">
<div id="head-line"></div>
<div id="content">
    <header id="head">
        <div id="logo">
            <img src="http://www.johninux.com/images/head_portrait.png" class="bio-photo" alt=" bio photo">
            <h2>Simple</h2>
        </div>
        <nav id="nav">
            <ul>
                <li class="fn-clear"><a href="http://www.johninux.com" rel="nofollow" class="action"><i class="icon-home"></i> Home</a></li>
                <li class="fn-clear"><a href="http://www.johninux.com/archives.html"><i class="icon-list-ul"></i> Archives</a></li>
                <li class="fn-clear"><a href="mailto:zhaoxuan1727@gmail.com"><i class="icon-envelope-alt"></i> Contact</a></li>
                <li class="fn-clear"><a href="http://www.johninux.com/contact.html"><i class="icon-comments-alt"></i> About </a></li>
            </ul>
        </nav>
    </header>
    <section id="contain">
        <header id="begin">
            <h1 class="post-title">Hadoop Combine</h1>
        </header>
		<article class="post">
    <!-- <h1 class="post-title">Hadoop Combine</h1> -->
    <p>之前在面试的时候，有人突然问到了一个问题：Combine 是做什么的？</p>

<p>引用官方的原话<a href="http://wiki.apache.org/hadoop/HadoopMapReduce" title="Title">原话</a></p>

<p>When the map operation outputs its pairs they are already available in memory. For efficiency reasons, sometimes it makes sense to take advantage of this fact by supplying a combiner class to perform a reduce-type function. If a combiner is used then the map key-value pairs are not immediately written to the output. Instead they will be collected in lists, one list per each key value. When a certain number of key-value pairs have been written, this buffer is flushed by passing all the values of each key to the combiner’s reduce method and outputting the key-value pairs of the combine operation as if they were created by the original map operation.</p>

<p>For example, a word count MapReduce application whose map operation outputs (word, 1) pairs as words are encountered in the input can use a combiner to speed up processing. A combine operation will start gathering the output in in-memory lists (instead of on disk), one list per word. Once a certain number of pairs is output, the combine operation will be called once per unique word with the list available as an iterator. The combiner then emits (word, count-in-this-part-of-the-input) pairs. From the viewpoint of the Reduce operation this contains the same information as the original Map output, but there should be far fewer pairs output to disk and read from disk.</p>

<p>简单的说，就是在 map 之后，但是数据还没到 reduce 之前，调用一个 reduce-type function 做一些操作，提高性能。</p>


    <nav class="pagination-published">Published by John — 17 Mar 2014</nav>

    <nav class="pagination-link">
        
        <a class="prev" href="http://www.johninux.com/c/2014/02/28/binary-magic.html" rel="bookmark">&laquo;&nbsp;二进制的魔力</a>
        
        
        <a class="next" href="http://www.johninux.com/linux/2014/03/19/fedora-install-php-fpm-nginx.html" rel="bookmark">Fedora install php-fpm and nginx...&nbsp;&raquo;</a>
        
     </nav>
     <div id="disqus_thread"></div>
</article>

<!-- disqus -->
<!-- <div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'johnzhao'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a> -->
<!-- end_disqus -->
        <footer id="foot">
            <p>&copy; 2014 John Zhao All rights reserved. Powered by <a href="http://jekyllrb.com">Jekyll</a> using the <a href="http://mademistakes.com/">PIZn</a></p>
        </footer>
    </section>
</div>
<div id="foot-line"></div>
<script src="http://www.johninux.com/js/jquery.js" type="text/javascript"></script>
<script src="http://www.johninux.com/js/jquery.scrollTo.js" type="text/javascript"></script>
<script src="http://www.johninux.com/js/theOne.js" type="text/javascript"></script>
<!-- baidu tongji begin -->
<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F2de4c656ec06b5b899ebb2b5148eb2e1' type='text/javascript'%3E%3C/script%3E"));
</script>
<!-- baidu tongji end -->
</body>
</html>
